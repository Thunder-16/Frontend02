<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialy</title>
    <link rel="stylesheet" href="style.css">
</head>

<script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>

<script>
    function remove_title() {
        var element = document.getElementById("write_title_2");
        element.remove();
    };
    function remove_content() {
        var element = document.getElementById("write_content_2");
        element.remove();
    };
    function remove_content2() {
        var element = document.getElementById("write_content_3");
        element.remove();
    };
    
    
   
 
//     function sendData() {
//     const title = document.getElementById('inputTitle').value;
//     const content1 = document.getElementById('input_text_box').value;
//     const content2 = document.getElementById('input_2').value;

//     const request = new XMLHttpRequest();
//     request.open('POST', 'http://10.120.74.53:3001/', true)
//     request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded'); 
//     request.send(`title=${title}&content1=${content1}&content2=${content2}`);
//     alert('게시글을 등록하였습니다.');
//     document.getElementById('inputTitle').value = null;
//     document.getElementById('input_text_box').value = null; 
//     document.getElementById('input_2').value = null; 
//     }
    

//    $(document).ready(function() {
//     if(localStorage.getItem('option')) {
//         var option = localStorage.getItem('option');
//         if(option == 'true') {
//             const audioContainer = document.getElementById("audio")
//             audioContainer.play();
//         }

//     }
//    });
    
    
 
    



    // $(document).ready(function () {
    //     $('#submit').click(function () {
    //         let title = $("#write_title_2").val();
    //         let content1 = $("#write_content_2").val();
    //         let content2 = $("#write_content_3").val();
    //         var title = { "title": 'fdsafd' }
    //         $.ajax({
    //             url: 'http://10.120.74.53:3001/',
    //             method: 'GET',
    //             async: true,
    //             data: { title: title, content1: content1, content2: content2 },
    //             dataType: 'html',
    //             success: function (res) {
    //                 document.querySelector("#appendHtml").innerHTML = res;
    //                 alert("success");
    //             }
    //         })
    //     })
    // })

   
    

    

    // window.onload = function () {
    //     alert("작동시작")
    //     import { defaultMusicPlayed } from 'Writedialy.html';
    //     alert(defaultMusicPlayed);
    //     if (defaultMusicPlayed == true) {
    //         const audioContainer = document.getElementById("audio")
    //         audioContainer.play();
    //     } else {
    //         const audioContainer = document.getElementById("audio")
    //         audioContainer.pause();
    //     }
    // }

</script>

<!-- <script type="text/javascript">
     $(document).ready(function() {
        
    	import { defaultMusicPlayed } from './Writedialy.html';
        alert(defaultMusicPlayed);
        if (defaultMusicPlayed == true) {
            const audioContainer = document.getElementById("audio")
            audioContainer.play();
        } else {
            const audioContainer = document.getElementById("audio")
            audioContainer.pause();
        }
        
    });

</script> -->

<body>
    <audio loop src="music.mp3" style="display: none;" id="audio">
        <source id="audio">
    </audio>
    <div class="mhomepage">
        <img src="guestbook_ic.png" id="guestbook" style="position: absolute;" type="button"
            onclick="document.location.href='Guestbook.html'">
        <img src="home_ic.png" id="home" style="position: absolute;" type="button"
            onclick="document.location.href='MiniHomepage.html'">
        <img src="layout.png" id="layout" style="position: relative;">
        <img src="dialy_ic2.png" id="dialy" style="position: absolute;" type="button"
            onclick="document.location.href='Dialy.html'">

    </div>

    <img src="rename.png" id="rename" style="position: absolute; top: 457px; left: 380px;">
    <img src="mh_profile.png" id="mh_profile">
    <img src="name_ic.png" id="name_ic">
    <h5 style="position: absolute; font-family: DungGeunMo; top: 438px; left: 230px;">today my name:</h5>
    <h2 style="position: absolute; font-family: DungGeunMo; top: 438px; left: 330px;">이름</h2>
    <h3 style="position: absolute; font-family: DungGeunMo; top: 125px; left: 202px;">today 0000 || total 0000</h3>
    <img src="write_dialy_title.png" style="position: absolute; top: 150px; left: 579px; width: 603px;">
    <img src="write_content_ic.png" style="position: absolute; top: 240px; left: 579px; width: 603px;">
    <h2 style="position: absolute; font-family: DungGeunMo; top: 155px; left: 600px;">12/06</h2>
    <h1 style="position: absolute; color: gray; font-family: DungGeunMo; top: 150px; left: 700px; z-index: 3;"
        id="write_title_2">제목</h1>
    <input type="text" size="31"
        style="position: absolute; top: 170px; left: 700px; font-size: 25px; outline: none; border: none; height: 32px;"
        onclick="remove_title();" id="inputTitle">
    <textarea type="text" cols="68" id="input_text_box" onclick="remove_content();"
        style="top: 260px; position: absolute; left: 600px; height: 350px; outline: none; border: none; font-size: 16px; resize: none;"></textarea>
    <h2 style="font-family: DungGeunMo; position: absolute; top: 240px; left: 600px; color: gray;" id="write_content_2">
        내용입력</h2>
    <img src="input_content2.png" style="position: absolute; top: 550px; left: 600px; width: 500px;">
    <img src="input_btn2.png" style="position: absolute; top: 550px; left: 1110px; height: 40px;" onclick="sendData();">
    <h2 style="position: absolute; top: 538px; left: 620px; height: 40px; font-family: DungGeunMo; color: gray; z-index: 10"
        id="write_content_3">내용을 입력해주세요</h2>
    <input type="text" size="31"
        style="position: absolute; top: 550px; left: 620px; height: 34px; font-size: 16px; width: 450px; outline: none; border: none; margin-top: 1px;"
        id="input_2"
        onclick="remove_content2();">
    <h3 style="position: absolute; font-family: DungGeunMo; top: 543px; left: 1122px;" id="submit" class="submit" onclick="
    
    var title = document.getElementById('inputTitle');
    var content = document.getElementById('input_text_box');
    var date = document.getElementById('input_2');
    $.ajax({
                contentType: 'application/json; charset=utf-8',
                method: 'POST',
                dataType: 'json',
                data: JSON.stringify({
                    title: title,
                    content: content,
                    date: date,
                }),
                url:'http://10.120.74.53:3001/',
                success: function (result) {
                    alert('success');
                    if(result) {
                        alert('다이어리 작성 완료');
                    } 
                },
                error: function (result) {
                    
                    alert('오류 발생. 관리자에게 문의하세요.');
                },
                async: false,
            });

    location.reload();
    ">입력

    
    </h3>

</body>

</html>